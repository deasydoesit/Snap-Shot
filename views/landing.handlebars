<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Navbar</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <form class="login form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="email" id="email-login" placeholder="Email">
            <input class="form-control mr-sm-2" type="password" id="password-login" placeholder="Password">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <h2>Sign Up Form</h2>
            <form class="signup">
                <div class="form-group">
                    <label for="first">First name</label>
                    <input type="text" class="form-control" id="firstName-input" placeholder="First name">
                </div>
                <div class="form-group">
                    <label for="last">Last name</label>
                    <input type="text" class="form-control" id="lastName-input" placeholder="Last name">
                </div>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="email" class="form-control" id="email-input" placeholder="Email">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" id="password-input" placeholder="Password">
                </div>
                <div style="display: none" id="alert" class="alert alert-danger" role="alert">
                    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                    <span class="sr-only">Error:</span> <span class="msg"></span>
                </div>
                <button type="submit" class="btn btn-primary">Sign Up</button>
            </form>
            <br>
        </div>
    </div>
</div>
<script>
    
$(document).ready(function() {

    //sign up
        var signUpForm = $("form.signup");
        var firstNameInput = $("input#firstName-input");
        var lastNameInput = $("input#lastName-input");
        var emailInput = $("input#email-input");
        var passwordInput = $("input#password-input");

        signUpForm.on("submit", function(event) {

            event.preventDefault();

            var userData = {
                firstName: firstNameInput.val().trim(),
                lastName: lastNameInput.val().trim(),
                email: emailInput.val().trim(),
                password: passwordInput.val().trim()
            };

            if (!userData.firstName || !userData.lastName || !userData.email || !userData.password) {
                return;
            }

            signUpUser(userData.firstName, userData.lastName, userData.email, userData.password);

            firstNameInput.val("");
            lastNameInput.val("");
            emailInput.val("");
            passwordInput.val("");
        });

        function signUpUser(firstName, lastName, email, password) {
            $.post("/api/signup", {
                firstName: firstName,
                lastName: lastName,
                email: email,
                password: password
            }).then(function(data) {
                window.location.replace(data);
            }).catch(handleLoginErr);
        }

        function handleLoginErr(err) {
            $("#alert .msg").text(err.responseJSON);
            $("#alert").fadeIn(500);
        }
    //sign up

    //login 
        var loginForm = $("form.login");
        var emailInput = $("input#email-login");
        var passwordInput = $("input#password-login");

        loginForm.on("submit", function(event) {
            event.preventDefault();
            var userData = {
                email: emailInput.val().trim(),
                password: passwordInput.val().trim()
            };
        
            if (!userData.email || !userData.password) {
                return;
            }

            loginUser(userData.email, userData.password);
            emailInput.val("");
            passwordInput.val("");
        });

        function loginUser(email, password) {
            $.post("/api/login", {
                email: email,
                password: password
            }).then(function(data) {
                window.location.replace(data);
            }).catch(function(err) {
                console.log(err);
            });
        }
    //login

});
</script>