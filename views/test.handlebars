<form id="spot" action="/api/upload" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <img id="placeholder" src="#" alt="uploaded image" style="display: none">
        <input type="file" accept="image/*" name="photo" id="file-input" class="form-control-file" onchange="displayImage(this);">
    </div>
    <div class="form-group">
        <label for="tod">Select time(s) of day to best take photo</label>
        <select multiple class="form-control" id="tod-input">
            <option>Sunrise</option>
            <option>Day</option>
            <option>Sunset</option>
            <option>Evening</option>
        </select>
    </div>
    <div class="form-group">
        <label for="type">Select location type(s)</label>
        <select multiple class="form-control" id="type-input">
            <option>Historical</option>
            <option>Vista</option>
            <option>Trendy</option>
            <option>Street Art</option>
            <option>Nature</option>
        </select>
    </div>
    <div class="form-group">
        <label for="description">Provide a brief description (120 characters)</label>
        <textarea class="form-control" id="description-input" rows="2"></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
<script>

    function displayImage(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#placeholder')
                    .attr('src', e.target.result)
                    .css("display", "block")
                    .width(150)
                    .height(200);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }

    $(document).ready(function() {  
        var spotForm = $("form#spot");

        spotForm.on("submit", function(event) {
            event.preventDefault();

            var locations = [];
            $.each($("select#type-input option:selected"), function(){            
                locations.push($(this).val());
            });

            var tods = [];
            $.each($("select#tod-input option:selected"), function(){            
                tods.push($(this).val());
            });

            var formData = new FormData();  

            formData.append('tod', tods);
            formData.append('type', locations);
            formData.append('description', $("textarea#description-input").val().trim());
            formData.append('photo', $("input#file-input")[0].files[0]);

            $.ajax({
                type: 'POST',
                url: '/api/upload',
                data: formData,
                processData: false,
                contentType: false,
                success: function(data){
                    document.getElementById("spot").reset();
                    $("#placeholder").css("display", "none");
                    alert(data);
                }
            });
        });
    });
</script>